{% extends "administrar/comprobantes/base_pdf.html" %}
{% load static %}

{% block header %}
<table class="header-table">
    <tr>
        <td style="width: 50%;">
            {% if empresa.logo %}
            <img src="{{ empresa.logo.url }}" class="logo">
            {% else %}
            <div class="company-name">{{ empresa.nombre }}</div>
            {% endif %}
            <div class="text-muted" style="font-size: 9pt; margin-top: 5pt;">
                {{ empresa.direccion }}<br>
                {{ empresa.email }} | Tel: {{ empresa.telefono }}<br>
                CUIT: {{ empresa.cuit|default:"-" }}
            </div>
        </td>
        <td style="width: 50%; text-align: right;">
            <div class="invoice-type">{{ venta.tipo_comprobante|default:"X" }}</div>
            <div style="margin-top: 10pt;">
                <span class="text-bold">FACTURA N°:</span> {{ venta.numero_factura_formateado }}<br>
                <span class="text-bold">FECHA:</span> {{ venta.fecha|date:"d/m/Y" }}<br>
                <span class="text-bold">CONDICIÓN:</span> {{ venta.condicion_venta }}
            </div>
        </td>
    </tr>
</table>
{% endblock %}

{% block content %}
<div class="info-box">
    <table style="border: none;">
        <tr>
            <td style="width: 50%; border: none;">
                <span class="text-bold">CLIENTE:</span> {{ cliente.nombre }}<br>
                <span class="text-bold">DOMICILIO:</span> {{ cliente.domicilio|default:"-" }}<br>
                <span class="text-bold">IVA:</span> {{ cliente.get_condicion_fiscal_display|default:"Consumidor Final"
                }}
            </td>
            <td style="width: 50%; border: none; text-align: right;">
                <span class="text-bold">CUIT:</span> {{ cliente.cuit|default:"-" }}<br>
                <span class="text-bold">LOCALIDAD:</span> {{ cliente.localidad.nombre|default:"-" }}<br>
                <span class="text-bold">PROVINCIA:</span> {{ cliente.provincia.nombre|default:"-" }}
            </td>
        </tr>
    </table>
</div>

<table class="items-table">
    <thead>
        <tr>
            <th style="width: 10%; text-align: center;">CANT.</th>
            <th style="width: 55%; text-align: left;">DESCRIPCIÓN</th>
            <th style="width: 15%; text-align: right;">P. UNIT.</th>
            <th style="width: 20%; text-align: right;">SUBTOTAL</th>
        </tr>
    </thead>
    <tbody>
        {% for item in detalles %}
        <tr>
            <td style="text-align: center;">{{ item.cantidad|floatformat:0 }}</td>
            <td>{{ item.producto.descripcion }}</td>
            <td style="text-align: right;">$ {{ item.precio_unitario|floatformat:2 }}</td>
            <td style="text-align: right;">$ {{ item.subtotal|floatformat:2 }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="total-box">
    <table style="border: none;">
        {% if venta.tipo_comprobante == 'A' %}
        <tr>
            <td style="border: none;">Neto Gravado:</td>
            <td style="border: none; text-align: right;">$ {{ venta.subtotal|floatformat:2 }}</td>
        </tr>
        <tr>
            <td style="border: none;">IVA (21%):</td>
            <td style="border: none; text-align: right;">$ {{ venta.iva_amount|default:0|floatformat:2 }}</td>
        </tr>
        {% endif %}
        <tr>
            <td style="border: none; font-size: 14pt;" class="text-bold">TOTAL:</td>
            <td style="border: none; font-size: 14pt; text-align: right;" class="text-bold">$ {{
                venta.total|floatformat:2 }}</td>
        </tr>
    </table>
</div>

{% if empresa.pie_factura %}
<div style="margin-top: 20pt; font-size: 9pt; color: #666; font-style: italic;">
    {{ empresa.pie_factura }}
</div>
{% endif %}
{% endblock %}