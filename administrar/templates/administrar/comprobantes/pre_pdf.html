{% extends "administrar/comprobantes/base_pdf.html" %}
{% load static %}

{% block header %}
<table class="header-table">
    <tr>
        <td style="width: 50%;">
            {% if empresa.logo %}
            <img src="{{ empresa.logo.url }}" class="logo">
            {% else %}
            <div class="company-name">{{ empresa.nombre }}</div>
            {% endif %}
            <div class="text-muted" style="font-size: 9pt; margin-top: 5pt;">
                {{ empresa.direccion }}<br>
                {{ empresa.email }} | Tel: {{ empresa.telefono }}<br>
                CUIT: {{ empresa.cuit|default:"-" }}
            </div>
        </td>
        <td style="width: 50%; text-align: right;">
            <div class="invoice-type" style="font-size: 18pt;">PRESUPUESTO</div>
            <div style="margin-top: 10pt;">
                <span class="text-bold">NÚMERO:</span> #{{ presupuesto.id }}<br>
                <span class="text-bold">FECHA:</span> {{ presupuesto.fecha|date:"d/m/Y" }}<br>
                <span class="text-bold">VALIDEZ:</span> {{ presupuesto.validez_dias|default:"10" }} días
            </div>
        </td>
    </tr>
</table>
{% endblock %}

{% block content %}
<div class="info-box">
    <table style="border: none;">
        <tr>
            <td style="width: 50%; border: none;">
                <span class="text-bold">SOLICITANTE:</span> {{ presupuesto.cliente.nombre }}<br>
                <span class="text-bold">DOMICILIO:</span> {{ presupuesto.cliente.domicilio|default:"-" }}
            </td>
            <td style="width: 50%; border: none; text-align: right;">
                <span class="text-bold">CUIT:</span> {{ presupuesto.cliente.cuit|default:"-" }}<br>
                <span class="text-bold">TELEFONO:</span> {{ presupuesto.cliente.telefono|default:"-" }}
            </td>
        </tr>
    </table>
</div>

<table class="items-table">
    <thead>
        <tr>
            <th style="width: 10%; text-align: center;">CANT.</th>
            <th style="width: 55%; text-align: left;">DESCRIPCIÓN</th>
            <th style="width: 15%; text-align: right;">P. UNIT.</th>
            <th style="width: 20%; text-align: right;">SUBTOTAL</th>
        </tr>
    </thead>
    <tbody>
        {% for item in presupuesto.detalles.all %}
        <tr>
            <td style="text-align: center;">{{ item.cantidad|floatformat:0 }}</td>
            <td>{{ item.producto.descripcion }}</td>
            <td style="text-align: right;">$ {{ item.precio_unitario|floatformat:2 }}</td>
            <td style="text-align: right;">$ {{ item.subtotal|floatformat:2 }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="total-box">
    <table style="border: none;">
        <tr>
            <td style="border: none; font-size: 14pt;" class="text-bold">TOTAL ESTIMADO:</td>
            <td style="border: none; font-size: 14pt; text-align: right;" class="text-bold">$ {{
                presupuesto.total|floatformat:2 }}</td>
        </tr>
    </table>
</div>

<div style="margin-top: 30pt; font-size: 9pt; color: #666; border: 1px dashed #ccc; padding: 10pt;">
    <span class="text-bold">Nota:</span> Este documento no representa una factura legal y los precios están sujetos a
    cambios sin previo aviso hasta la confirmación del pedido.
</div>
{% endblock %}